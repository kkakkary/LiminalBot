{"version":3,"sources":["../../../../../src/listeners/application-commands/context-menu/CorePreContextMenuCommandRun.ts"],"names":["Listener","Events","container"],"mappings":";;;;;;;;AAIO,IAAM,aAAA,GAAN,MAAM,aAAA,SAAqBA,qBAAiD,CAAA;AAAA,EAC3E,YAAY,OAAiC,EAAA;AACnD,IAAA,KAAA,CAAM,OAAS,EAAA,EAAE,KAAO,EAAAC,iBAAA,CAAO,0BAA0B,CAAA;AAAA;AAC1D,EAEA,MAAa,IAAI,OAA0C,EAAA;AAC1D,IAAM,MAAA,EAAE,OAAS,EAAA,WAAA,EAAgB,GAAA,OAAA;AAGjC,IAAM,MAAA,YAAA,GAAe,MAAM,IAAA,CAAK,SAAU,CAAA,MAAA,CAAO,GAAI,CAAA,eAAe,CAAE,CAAA,cAAA,CAAe,WAAa,EAAA,OAAA,EAAS,OAAc,CAAA;AACzH,IAAI,IAAA,YAAA,CAAa,OAAS,EAAA;AACzB,MAAK,IAAA,CAAA,SAAA,CAAU,OAAO,IAAK,CAAAA,iBAAA,CAAO,0BAA0B,YAAa,CAAA,SAAA,IAAa,OAAO,CAAA;AAC7F,MAAA;AAAA;AAID,IAAA,MAAM,cAAc,MAAM,OAAA,CAAQ,cAAc,cAAe,CAAA,WAAA,EAAa,SAAS,OAAc,CAAA;AACnG,IAAI,IAAA,WAAA,CAAY,OAAS,EAAA;AACxB,MAAK,IAAA,CAAA,SAAA,CAAU,OAAO,IAAK,CAAAA,iBAAA,CAAO,0BAA0B,WAAY,CAAA,SAAA,IAAa,OAAO,CAAA;AAC5F,MAAA;AAAA;AAGD,IAAA,IAAA,CAAK,SAAU,CAAA,MAAA,CAAO,IAAK,CAAAA,iBAAA,CAAO,4BAA4B,OAAO,CAAA;AAAA;AAEvE,CAAA;AAxBmF,MAAA,CAAA,aAAA,EAAA,cAAA,CAAA;AAA5E,IAAM,YAAN,GAAA;AA0BP,KAAKC,gBAAA,CAAU,OAAO,SAAU,CAAA;AAAA,EAC/B,IAAM,EAAA,8BAAA;AAAA,EACN,KAAO,EAAA,YAAA;AAAA,EACP,KAAO,EAAA;AACR,CAAC,CAAA","file":"CorePreContextMenuCommandRun.cjs","sourcesContent":["import { container } from '@sapphire/pieces';\nimport { Listener } from '../../../lib/structures/Listener';\nimport { Events, type PreContextMenuCommandRunPayload } from '../../../lib/types/Events';\n\nexport class CoreListener extends Listener<typeof Events.PreContextMenuCommandRun> {\n\tpublic constructor(context: Listener.LoaderContext) {\n\t\tsuper(context, { event: Events.PreContextMenuCommandRun });\n\t}\n\n\tpublic async run(payload: PreContextMenuCommandRunPayload) {\n\t\tconst { command, interaction } = payload;\n\n\t\t// Run global preconditions:\n\t\tconst globalResult = await this.container.stores.get('preconditions').contextMenuRun(interaction, command, payload as any);\n\t\tif (globalResult.isErr()) {\n\t\t\tthis.container.client.emit(Events.ContextMenuCommandDenied, globalResult.unwrapErr(), payload);\n\t\t\treturn;\n\t\t}\n\n\t\t// Run command-specific preconditions:\n\t\tconst localResult = await command.preconditions.contextMenuRun(interaction, command, payload as any);\n\t\tif (localResult.isErr()) {\n\t\t\tthis.container.client.emit(Events.ContextMenuCommandDenied, localResult.unwrapErr(), payload);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.container.client.emit(Events.ContextMenuCommandAccepted, payload);\n\t}\n}\n\nvoid container.stores.loadPiece({\n\tname: 'CorePreContextMenuCommandRun',\n\tpiece: CoreListener,\n\tstore: 'listeners'\n});\n"]}